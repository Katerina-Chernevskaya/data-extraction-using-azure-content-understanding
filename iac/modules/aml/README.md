<!-- BEGIN_TF_DOCS -->
# aml Module

---

## Requirements

| Name      | Version           |
|-----------|-------------------|
| terraform | >= 1.9.6, < 2.0.0 |
| azuread   | >= 2.53, < 3.5    |
| azurerm   | >= 4.0.0, < 5.0.0 |
| modtm     | ~> 0.3            |
| random    | >= 3.0.0, < 4.0.0 |

## Providers

| Name    | Version           |
|---------|-------------------|
| azurerm | >= 4.0.0, < 5.0.0 |

## Modules

| Name | Source                                                  | Version |
|------|---------------------------------------------------------|---------|
| aml  | Azure/avm-res-machinelearningservices-workspace/azurerm | 0.7.0   |

## Resources

| Name                                                                                                                                                 | Type        |
|------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| [azurerm_role_assignment.aml_workspace_ds](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment)          | resource    |
| [azurerm_role_assignment.aml_workspace_ml_operator](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment) | resource    |
| [azurerm_resource_group.resource_group](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group)           | data source |

## Inputs

| Name                                      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Type                                                                                                                                                                                                                                                                  | Default                                                                                           | Required |
|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|:--------:|
| key\_vault\_resource\_id                  | The resource\_id of the Azure Key Vault.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                              | n/a                                                                                               |   yes    |
| location                                  | The location/region where the resources will be deployed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                              | n/a                                                                                               |   yes    |
| name                                      | The name of the this resource.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                              | n/a                                                                                               |   yes    |
| pe\_subnet\_resource\_id                  | The resource\_id of the Private Endpoint subnet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                              | n/a                                                                                               |   yes    |
| private\_dns\_zones                       | Map of DNS zone names to their details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | <pre>map(object({<br/>    name = string<br/>    id   = string<br/>  }))</pre>                                                                                                                                                                                         | n/a                                                                                               |   yes    |
| resource\_group\_name                     | The resource group where the resources will be deployed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                              | n/a                                                                                               |   yes    |
| storage\_account\_resource\_id            | The resource\_id of the storage account.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                              | n/a                                                                                               |   yes    |
| ai\_service\_name                         | The name of the AI service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                              | `null`                                                                                            |    no    |
| aml\_workspace\_ds\_adgroup\_id           | The object id of the data scientist group.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                              | `null`                                                                                            |    no    |
| aml\_workspace\_ml\_operator\_adgroup\_id | The object id of the ML operator AD group.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                              | `null`                                                                                            |    no    |
| application\_insights\_resource\_id       | The resource\_id of the Application Insights instance.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                              | `""`                                                                                              |    no    |
| container\_registry\_resource\_id         | The resource\_id of the Azure Container Registry.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                              | `""`                                                                                              |    no    |
| create\_compute\_instance                 | Specifies whether a compute instance should be created for the workspace to provision the managed vnet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `bool`                                                                                                                                                                                                                                                                | `false`                                                                                           |    no    |
| customer\_managed\_key                    | Specifies whether to use a customer-managed key for the ACR.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | <pre>object({<br/>    key_vault_resource_id = string<br/>    key_name              = string<br/>    key_version           = optional(string, null)<br/>    user_assigned_identity = optional(object({<br/>      resource_id = string<br/>    }), null)<br/>  })</pre> | `null`                                                                                            |    no    |
| deploy\_ai\_services                      | Specifies whether to deploy the AI services.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `bool`                                                                                                                                                                                                                                                                | `false`                                                                                           |    no    |
| enable\_telemetry                         | This variable controls whether or not telemetry is enabled for the module.<br/>For more information see <https://aka.ms/avm/telemetryinfo>.<br/>If it is set to false, then no telemetry will be collected.<br/>As explained in the [AVM documentation](https://azure.github.io/Azure-Verified-Modules/help-support/telemetry/),<br/>Microsoft relies on telemetry to identify the deployments of the AVM Modules.<br/>Deployments are identified through a specific GUID (Globally Unique ID), indicating that the code originated from AVM.<br/>The data is collected and governed by Microsoftâ€™s privacy policies, found in the [Trust Center](https://www.microsoft.com/trust-center).<br/>Telemetry collected does not provide Microsoft with insights into the resources deployed,<br/>their configuration or any customer data stored in or processed by Azure resources deployed by using code from AVM.<br/>Microsoft does not track the usage/consumption of individual resources using telemetry.<br/>Telemetry collection is strictly optional, and it can easily be opted out of by following<br/>[these procedures](https://azure.github.io/Azure-Verified-Modules/help-support/telemetry/#opting-out). | `bool`                                                                                                                                                                                                                                                                | `true`                                                                                            |    no    |
| kind                                      | The kind of the resource. This is used to determine the type of the resource. If not specified, the resource will be created as a Default resource which is AML.<br/>Possible values are:<br/>- `Default` - The resource will be created as a standard Azure Machine Learning resource.<br/>- `hub` - The resource will be created as an Azure AI Hub resource.<br/>- `Project` - The resource will be created as an Azure AI project.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                              | `"Default"`                                                                                       |    no    |
| log\_analytics\_workspace\_resource\_id   | The resource\_id of the Log Analytics Workspace.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                              | `""`                                                                                              |    no    |
| outbound\_rules                           | A map of private endpoints toutbound rules for the managed network.<br/><br/>  - `resource_id` - The resource id for the corresponding private endpoint.<br/>  - `sub_resource_target` - The sub\_resource\_target is target for the private endpoint. e.g. account for Openai, searchService for Azure Ai Search                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | <pre>map(object({<br/>    resource_id         = string<br/>    sub_resource_target = string<br/>  }))</pre>                                                                                                                                                           | `{}`                                                                                              |    no    |
| tags                                      | A map of tags to add to all resources                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `map(string)`                                                                                                                                                                                                                                                         | `null`                                                                                            |    no    |
| user\_assigned\_identity\_id              | The ID of the user assigned identity.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `list(string)`                                                                                                                                                                                                                                                        | `null`                                                                                            |    no    |
| workspace\_managed\_network               | Specifies properties of the workspace's managed virtual network.<br/><br/>Possible values for `isolation_mode` are:<br/>- 'Disabled': Inbound and outbound traffic is unrestricted _or_ BYO VNet to protect resources.<br/>- 'AllowInternetOutbound': Allow all internet outbound traffic.<br/>- 'AllowOnlyApprovedOutbound': Outbound traffic is allowed by specifying service tags.<br/>While is possible to update the workspace to enable network isolation ('AllowInternetOutbound' or 'AllowOnlyApprovedOutbound'), it is not possible to disable it on a workspace with it enabled.<br/><br/>`spark_ready` determines whether spark jobs will be run on the network. This value can be updated in the future.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | <pre>object({<br/>    isolation_mode = string<br/>    spark_ready    = optional(bool, true)<br/>  })</pre>                                                                                                                                                            | <pre>{<br/>  "isolation_mode": "AllowOnlyApprovedOutbound",<br/>  "spark_ready": true<br/>}</pre> |    no    |

## Outputs

| Name   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| output | An object with relevant details on the created resource (AML workspace, AI Foundry hub or AI Foundry project).<br/><br/>  - `resource_id`: the id of the resource.<br/>  - `resource`:<br/>    - `name`: resource name<br/>    - `container_registry_id`: id of the associated container registry resource, if exists.<br/>    - `storage_account_id`: id of the associated storage account resource, if exists.<br/>    - `key_vault_id`: id of the associated key vault resource, if exists.<br/>    - `application_insights_id`: id of the associated App Insights resource, if exists.<br/>  - `resource_identity`:<br/>    - `principal_id`: the id of the identity entity<br/>    - `type`: the type of the identity entity |
<!-- END_TF_DOCS -->
